<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Filter</title>

    <style>
        body {
            font-family: sans-serif;
        }

        img {
            max-width: 100%;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 16px;
        }

        .filter-controls {
            margin-bottom: 20px;
        }

        .filter-controls input[type="radio"] {
            margin-right: 8px;
        }

        .filter-controls label {
            margin-right: 20px;
            cursor: pointer;
        }

        .card {
            display: none;
        }
    </style>
</head>

<body>

    <!-- সার্চ ইনপুট -->
    <input type="text" placeholder="Search..." data-search>

    <!-- রেডিও বাটন ক্যাটেগরি ফিল্টার -->
    <div class="filter-controls">
        <label>
            <input type="radio" name="category" value="all" checked> All
        </label>
        <label>
            <input type="radio" name="category" value="men's clothing"> Men's Clothing
        </label>
        <label>
            <input type="radio" name="category" value="jewelery"> Jewelery
        </label>
        <label>
            <input type="radio" name="category" value="electronics"> Electronics
        </label>
        <label>
            <input type="radio" name="category" value="women's clothing"> Women's Clothing
        </label>
    </div>

    <!-- রিসেট বাটন -->
    <button data-reset>Reset Filters</button>

    <!-- কার্ড গ্রিড যেখানে API থেকে ডেটা যোগ হবে -->
    <div class="grid" id="productGrid">
        <!-- প্রতিটি প্রোডাক্টের জন্য প্রাথমিক কাঠামো -->
        <div class="card" data-template data-category="">
            <h3 data-title></h3>
            <img src="" alt="" data-thumbnail>

            <p>Description: <span data-description></span></p>
            <p>Price: <span data-price></span></p>
            <p><span data-category></span></p>
        </div>
    </div>

    <!-- No items found বার্তা -->
    <div class="no-items" data-no-items style="display: none;">No items found</div>

    <!-- MixItUp JS লাইব্রেরি -->
    <script src="https://cdn.jsdelivr.net/npm/mixitup@3/dist/mixitup.min.js"></script>

    <!-- JS ফাইল লিংক -->
    <script>
        // API থেকে ডেটা ফেচ করার জন্য async ফাংশন
        async function fetchProducts() {
            try {
                const response = await fetch('https://fakestoreapi.com/products');
                const data = await response.json();

                const productGrid = document.getElementById("productGrid");
                const template = document.querySelector("[data-template]");

                // টেমপ্লেট ক্লোন করে প্রতিটি প্রোডাক্টের জন্য কার্ড তৈরি করা
                data.forEach((product) => {
                    const card = template.cloneNode(true);
                    card.removeAttribute("data-template");
                    card.setAttribute("data-category", product.category.toLowerCase());
                    card.setAttribute("data-title", product.title.toLowerCase());

                    card.querySelector("[data-title]").textContent = product.title;
                    card.querySelector("[data-category]").textContent = product.category;
                    card.querySelector("[data-thumbnail]").setAttribute("src", product.image);
                    card.querySelector("[data-thumbnail]").setAttribute("alt", product.title);
                    card.querySelector("[data-description]").textContent = product.description;
                    card.querySelector("[data-price]").textContent = `$${product.price}`;

                    productGrid.appendChild(card);
                });

                template.style.display = "none";

                // MixItUp Initialization
                const mixer = mixitup('#productGrid', {
                    selectors: {
                        target: '.card'
                    },
                    animation: {
                        duration: 300
                    }
                });

                // সার্চ ইনপুট ফাংশনালিটি
                const searchInput = document.querySelector('[data-search]');
                searchInput.addEventListener('input', function () {
                    const query = searchInput.value.toLowerCase().trim();
                    mixer.filter(`[data-title*="${query}"]`);
                });

                // রেডিও বাটন ফিল্টার
                const radioButtons = document.querySelectorAll('[name="category"]');
                radioButtons.forEach(radio => {
                    radio.addEventListener('change', function () {
                        const value = this.value === 'all' ? 'all' : `[data-category="${this.value}"]`;
                        mixer.filter(value);
                    });
                });

                // রিসেট বাটন
                const resetButton = document.querySelector('[data-reset]');
                resetButton.addEventListener('click', function () {
                    searchInput.value = '';
                    document.querySelector('[name="category"][value="all"]').checked = true;
                    mixer.filter('all');
                });
            } catch (error) {
                console.error("Error fetching products:", error);
            }
        }

        // Fetch function call
        fetchProducts();
    </script>

</body>

</html>